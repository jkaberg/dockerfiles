# Postfix TLS configuration
# Generated by mail-forwarder

# General TLS settings
smtpd_tls_security_level = {{ config.tls.security_level }}
smtpd_tls_auth_only = yes
smtpd_tls_protocols = {{ config.tls.protocols }}
smtpd_tls_ciphers = {{ config.tls.ciphers }}
tls_preempt_cipherlist = yes

# TLS parameters
smtpd_tls_dh1024_param_file = /etc/postfix/tls_params.pem

# Logging
smtpd_tls_loglevel = 1

# Certificate paths
{% for domain in config.tls.domains %}
smtpd_tls_chain_files =
    {% for domain in config.tls.domains %}
    /etc/postfix/certs/{{ domain }}/privkey.pem /etc/postfix/certs/{{ domain }}/fullchain.pem
    {% endfor %}
{% endfor %} 